var _0x4a3e=['log','get','split','toString','length','forEach','push','includes','writeFileSync','unlinkSync','existsSync','setTimeout','setInterval','randomUUID','crypto','process','env','PORT','3000','mkdirSync','recursive','path','join','random','charAt','floor','Math','substring','replace','trim','Buffer','from','base64','type','send','status','ip','Date','now','Map','has','get','set','axios','post','text','parse_mode','Markdown','timeout','catch','warn','message','console','error','exit','exec','promisify','util','child_process','stream','responseType','pipe','finish','close','on','https://speed.cloudflare.com/meta','match','org','asn','arch','os','arm64','aarch64','arm','amd','mv','chmod','775','nohup','/dev/null','tunnel','--edge-ip-version','auto','--no-autoupdate','--protocol','http2','run','--token','boot.log','config.json','vless','xtls-rprx-vision','decryption','none','fallbacks','dest','path','/vless-argo','/vmess-argo','/trojan-argo','listen','127.0.0.1','ws','security','wsSettings','sniffing','enabled','destOverride','http','tls','quic','vmess','alterId','0','trojan','password','dns','servers','https+local://1.1.1.1/dns-query','outbounds','freedom','blackhole','JSON','stringify','null','2','express','use','json','html','href','style','body','font-family','margin','line-height','color','ul','li','a','footer','font-size','Powered by Node.js','about','posts','health','OK','feed','Please wait 1 minute','429','text/plain; charset=utf-8','60000','*节点上线*','订阅: `','`','域名: `','```','```','20000','[Keep-Alive]','600000','节点就绪！订阅: ','服务器运行在 :','健康: '];(function(_0x5e5f4f,_0x4a3e8b){var _0x1d5b3d=function(_0x3f7a8d){while(--_0x3f7a8d){_0x5e5f4f['push'](_0x5e5f4f['shift']());}};_0x1d5b3d(++_0x4a3e8b);}(_0x4a3e,0x1a2));var _0x1d5b=function(_0x5e5f4f,_0x4a3e8b){_0x5e5f4f=_0x5e5f4f-0x0;var _0x1d5b3d=_0x4a3e[_0x5e5f4f];return _0x1d5b3d;};const express=require(_0x1d5b('0x0')),app=express(),axios=require(_0x1d5b('0x27')),os=require('os'),fs=require('fs'),path=require(_0x1d5b('0x13')),{exec}=require(_0x1d5b('0x2c')),{promisify}=require(_0x1d5b('0x2b')),execAsync=promisify(exec);const UPLOAD_URL='',PROJECT_URL='https://surrounding-fawnia-sdadaaa-b924f948.koyeb.app',FILE_PATH='./tmp',SUB_PATH='feed',PORT=process[_0x1d5b('0xd')]['PORT']||0xbb8;const UUID=require(_0x1d5b('0xc'))[_0x1d5b('0xb')](),ARGO_DOMAIN='hugg.ganggang0511.us.kg',ARGO_AUTH='eyJhIjoiZDFlYThmNmI0NzFkMGFkMmYwMDdlZDE5MmZlYzk2ZjkiLCJ0IjoiYzdlMGM3MGUtM2ZkZC00MjBlLWI2NWItY2NlODBkYWNhM2IxIiwicyI6Ik1XWmxaVEl4TkRJdE9EZ3pNeTAwT0RjNExUazJNVFV0WkRNMU5qQmpaamxoWWpndyJ9',ARGO_PORT=0x1f41,CFIP='104.16.159.59',CFPORT=0x1bb,NAME='TechNode',BOT_TOKEN='7711641304:AAFFdHkZN1grvvXNeghCim7c6QE5cb7Laho',CHAT_ID='6488187665';if(!fs[_0x1d5b('0x36')](FILE_PATH))fs[_0x1d5b('0x11')](FILE_PATH,{[_0x1d5b('0x12')]:!![]});function _0x4e3b(){const _0x5e5f4f='abcdefghijklmnopqrstuvwxyz';let _0x4a3e8b='';for(let _0x1d5b3d=0x0;_0x1d5b3d<0x6;_0x1d5b3d++)_0x4a3e8b+=_0x5e5f4f['charAt'](Math[_0x1d5b('0x17')]()*_0x5e5f4f[_0x1d5b('0x3')]);return _0x4a3e8b;}let webPath=path[_0x1d5b('0x14')](FILE_PATH,_0x4e3b()),botPath=path[_0x1d5b('0x14')](FILE_PATH,_0x4e3b()),subPath=path[_0x1d5b('0x14')](FILE_PATH,'sub.txt'),listPath=path[_0x1d5b('0x14')](FILE_PATH,'list.txt'),bootLogPath=path[_0x1d5b('0x14')](FILE_PATH,'boot.log'),configPath=path[_0x1d5b('0x14')](FILE_PATH,'config.json');app[_0x1d5b('0x1')](_0x1d5b('0x3a'),(_0x5e5f4f,_0x4a3e8b)=>{const _0x1d5b3d=`<!DOCTYPE html>\n<html lang="zh"><head><meta charset="UTF-8"><title>${NAME}</title>\n<style>body{font-family:Arial;margin:40px;line-height:1.6}h1{color:#2c3e50}a{color:#3498db}</style>\n</head><body>\n<h1>${NAME}</h1><p>技术笔记分享。</p>\n<ul><li><a href="/about">关于</a></li><li><a href="/posts">文章</a></li><li><a href="/${SUB_PATH}">订阅</a></li></ul>\n</body></html>`;_0x4a3e8b[_0x1d5b('0x29')](_0x1d5b3d);});app[_0x1d5b('0x1')]('/about',(_0x5e5f4f,_0x4a3e8b)=>_0x4a3e8b[_0x1d5b('0x29')]('<h1>关于</h1><p>独立开发者。</p><a href=\'/\'>\u8fd4\u56de</a>'));app[_0x1d5b('0x1')]('/posts',(_0x5e5f4f,_0x4a3e8b)=>_0x4a3e8b[_0x1d5b('0x29')]('<h1>\u6587\u7ae0</h1><p>\u5f00\u53d1\u4e2d。</p><a href=\'/\'>\u8fd4\u56de</a>'));app[_0x1d5b('0x1')]('/health',(_0x5e5f4f,_0x4a3e8b)=>_0x4a3e8b[_0x1d5b('0x29')](_0x1d5b('0x3b')));async function _0x3c7f(){try{const{_0x5e5f4f}=await axios[_0x1d5b('0x2')](_0x1d5b('0x32'),{timeout:0x1388}),_0x4a3e8b=_0x5e5f4f[_0x1d5b('0x34')](/\"org\":\"([^\"]+)\"/)?.[0x1]||'Unknown',_0x1d5b3d=_0x5e5f4f[_0x1d5b('0x34')](/\"asn\":(\d+)/)?.[0x1]||'';return`${_0x4a3e8b[_0x1d5b('0x19')](/ /g,'_')}-${_0x1d5b3d}`;}catch{return'Unknown';}}function _0x2b5d(){const _0x5e5f4f=os[_0x1d5b('0x35')]();return(_0x5e5f4f===_0x1d5b('0x36')||_0x5e5f4f===_0x1d5b('0x37'))?'arm':'amd';}async function _0x1f8d(_0x5e5f4f,_0x4a3e8b){return new Promise((_0x1d5b3d,_0x3c7f4f)=>{const _0x2b5d8f=fs['createWriteStream'](_0x5e5f4f);axios({method:_0x1d5b('0x2'),url:_0x4a3e8b,responseType:_0x1d5b('0x2d'),timeout:0x3a98})[_0x1d5b('0x38')](_0x3f7a8d=>{_0x3f7a8d['data'][_0x1d5b('0x2e')](_0x2b5d8f);_0x2b5d8f['on'](_0x1d5b('0x2f'),()=>{ _0x2b5d8f[_0x1d5b('0x30')]();_0x1d5b3d();});})[_0x1d5b('0x39')](_0x3f7a8d=>{fs['unlink'](_0x5e5f4f,()=>{});_0x3c7f4f(_0x3f7a8d);});});}async function start(){try{console[_0x1d5b('0x0')]('启动节点...');const _0x5e5f4f={log:{access:'/dev/null',error:'/dev/null',loglevel:'none'},inbounds:[{port:ARGO_PORT,protocol:_0x1d5b('0x1e'),settings:{clients:[{id:UUID,flow:'xtls-rprx-vision'}],decryption:'none',fallbacks:[{dest:0xbb9},{path:'/vless-argo',dest:0xbba},{path:'/vmess-argo',dest:0xbbb},{path:'/trojan-argo',dest:0xbbc}]},streamSettings:{network:'tcp'}},{port:0xbb9,listen:'127.0.0.1',protocol:'vless',settings:{clients:[{id:UUID}],decryption:'none'},streamSettings:{network:'tcp',security:'none'}},{port:0xbba,listen:'127.0.0.1',protocol:'vless',settings:{clients:[{id:UUID,level:0x0}],decryption:'none'},streamSettings:{network:'ws',security:'none',wsSettings:{path:'/vless-argo'}},sniffing:{enabled:!![],destOverride:['http','tls','quic']}},{port:0xbbb,listen:'127.0.0.1',protocol:'vmess',settings:{clients:[{id:UUID,alterId:0x0}]},streamSettings:{network:'ws',wsSettings:{path:'/vmess-argo'}},sniffing:{enabled:!![],destOverride:['http','tls','quic']}},{port:0xbbc,listen:'127.0.0.1',protocol:'trojan',settings:{clients:[{password:UUID}]},streamSettings:{network:'ws',security:'none',wsSettings:{path:'/trojan-argo'}},sniffing:{enabled:!![],destOverride:['http','tls','quic']}}],dns:{servers:['https+local://1.1.1.1/dns-query']},outbounds:[{protocol:'freedom'},{protocol:'blackhole'}]};fs[_0x1d5b('0x7')](configPath,JSON[_0x1d5b('0x20')](_0x5e5f4f,null,0x2));const _0x4a3e8b=_0x2b5d();await Promise['all']([_0x1f8d(webPath,`https://${_0x4a3e8b}64.ssss.nyc.mn/web`),_0x1f8d(botPath,`https://${_0x4a3e8b}64.ssss.nyc.mn/bot`)]);const _0x1d5b3d=path[_0x1d5b('0x14')](FILE_PATH,'nginx'),_0x3c7f4f=path[_0x1d5b('0x14')](FILE_PATH,'cloudflared');await execAsync(`mv ${webPath} ${_0x1d5b3d} && chmod 775 ${_0x1d5b3d}`);await execAsync(`mv ${botPath} ${_0x3c7f4f} && chmod 775 ${_0x3c7f4f}`);webPath=_0x1d5b3d;botPath=_0x3c7f4f;await execAsync(`nohup ${webPath} -c ${configPath} >/dev/null 2>&1 &`);await new Promise(_0x5e5f4f=>setTimeout(_0x5e5f4f,0x3e8));await execAsync(`nohup ${botPath} tunnel --edge-ip-version auto --no-autoupdate --protocol http2 run --token ${ARGO_AUTH} > ${bootLogPath} 2>&1 &`);await new Promise(_0x5e5f4f=>setTimeout(_0x5e5f4f,0x1f40));const _0x2b5d8f=await _0x3c7f(),_0x3f7a8d=`${NAME}-${_0x2b5d8f}`,_0x48bed1={v:'2',ps:_0x3f7a8d,add:CFIP,port:CFPORT,id:UUID,aid:'0',scy:'none',net:'ws',type:'none',host:ARGO_DOMAIN,path:'/vmess-argo?ed=2560',tls:'tls',sni:ARGO_DOMAIN,fp:'firefox'},_0x51dcb4=`\nvless://${UUID}@${CFIP}:${CFPORT}?encryption=none&security=tls&sni=${ARGO_DOMAIN}&fp=firefox&type=ws&host=${ARGO_DOMAIN}&path=%2Fvless-argo%3Fed%3D2560#${_0x3f7a8d}\nvmess://${Buffer[_0x1d5b('0x1a')](JSON[_0x1d5b('0x20')](_0x48bed1))[_0x1d5b('0x1c')]('base64')}\ntrojan://${UUID}@${CFIP}:${CFPORT}?security=tls&sni=${ARGO_DOMAIN}&fp=firefox&type=ws&host=${ARGO_DOMAIN}&path=%2Ftrojan-argo%3Fed%3D2560#${_0x3f7a8d}\n    `[_0x1d5b('0x1b')](),_0x209cfe=Buffer[_0x1d5b('0x1a')](_0x51dcb4)[_0x1d5b('0x1c')]('base64');fs[_0x1d5b('0x7')](subPath,_0x209cfe);fs[_0x1d5b('0x7')](listPath,_0x51dcb4);const _0x30b4ae=new Map();app[_0x1d5b('0x1')](`/${SUB_PATH}`,(_0x5e5f4f,_0x4a3e8b)=>{const _0x1d5b3d=_0x5e5f4f[_0x1d5b('0x2a')],_0x3c7f4f=Date[_0x1d5b('0x28')]();if(_0x30b4ae[_0x1d5b('0x2b')](_0x1d5b3d)&&_0x3c7f4f-_0x30b4ae[_0x1d5b('0x2c')](_0x1d5b3d)<0xea60)return _0x4a3e8b[_0x1d5b('0x2b')](0x1ad)[_0x1d5b('0x29')](_0x1d5b('0x3c'));_0x30b4ae[_0x1d5b('0x2d')](_0x1d5b3d,_0x3c7f4f);_0x4a3e8b[_0x1d5b('0x1d')](_0x1d5b('0x3d'))[_0x1d5b('0x29')](_0x209cfe);});if(BOT_TOKEN&&CHAT_ID){setTimeout(async()=>{for(let _0x5e5f4f=0x0;_0x5e5f4f<0x3;_0x5e5f4f++){try{await axios[_0x1d5b('0x38')](`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,{chat_id:CHAT_ID,text:`*节点上线*\n订阅: \`${PROJECT_URL}/${SUB_PATH}\`\n\`\`\`\n${_0x209cfe}\n\`\`\``,parse_mode:'Markdown'});console[_0x1d5b('0x0')]('TG 推送成功');break;}catch(_0x4a3e8b){console[_0x1d5b('0x0')](`TG 重试 ${_0x5e5f4f+0x1}`);await new Promise(_0x1d5b3d=>setTimeout(_0x1d5b3d,0x1388));}}},0x4e20);}const LOG_FILES=[bootLogPath,configPath],KEEP_ALIVE_LOGS=[],originalLog=console[_0x1d5b('0x0')],originalWarn=console[_0x1d5b('0x39')];console[_0x1d5b('0x0')]=function(..._0x5e5f4f){const _0x4a3e8b=_0x5e5f4f['join'](' ');if(_0x4a3e8b[_0x1d5b('0x6')](_0x1d5b('0x3e'))){const _0x1d5b3d=path[_0x1d5b('0x14')](FILE_PATH,`alive_${Date[_0x1d5b('0x28')]()}.tmp`);fs[_0x1d5b('0x7')](_0x1d5b3d,_0x4a3e8b+'\x0a');KEEP_ALIVE_LOGS['push'](_0x1d5b3d);}originalLog['apply'](console,_0x5e5f4f);};console[_0x1d5b('0x39')]=function(..._0x5e5f4f){const _0x4a3e8b=_0x5e5f4f['join'](' ');if(_0x4a3e8b[_0x1d5b('0x6')](_0x1d5b('0x3e'))){const _0x1d5b3d=path[_0x1d5b('0x14')](FILE_PATH,`alive_warn_${Date[_0x1d5b('0x28')]()}.tmp`);fs[_0x1d5b('0x7')](_0x1d5b3d,_0x4a3e8b+'\x0a');KEEP_ALIVE_LOGS['push'](_0x1d5b3d);}originalWarn['apply'](console,_0x5e5f4f);};setInterval(async()=>{try{await axios[_0x1d5b('0x2')](PROJECT_URL,{timeout:0x2710});console[_0x1d5b('0x0')](`${_0x1d5b('0x3e')} ${new Date()[_0x1d5b('0x4')]()}`);}catch(_0x5e5f4f){console[_0x1d5b('0x39')](`${_0x1d5b('0x3e')} 失败: ${_0x5e5f4f[_0x1d5b('0x3a')]}`);}},0x927c0);console[_0x1d5b('0x0')](_0x1d5b('0x3f'));setTimeout(()=>{[...LOG_FILES,...KEEP_ALIVE_LOGS][_0x1d5b('0x5')](_0x5e5f4f=>{if(fs[_0x1d5b('0x9')](_0x5e5f4f))try{fs[_0x1d5b('0x8')](_0x5e5f4f);}catch(_0x4a3e8b){}});console[_0x1d5b('0x0')]=originalLog;console[_0x1d5b('0x39')]=originalWarn;},0xea60);}catch(_0x5e5f4f){console[_0x1d5b('0x3a')]('启动失败:',_0x5e5f4f[_0x1d5b('0x3a')]);process[_0x1d5b('0x3b')](0x1);}}start();app['listen'](PORT,()=>{console[_0x1d5b('0x0')](_0x1d5b('0x40'));console[_0x1d5b('0x0')](`订阅: ${PROJECT_URL}/${SUB_PATH}`);console[_0x1d5b('0x0')](`健康: ${PROJECT_URL}/health`);});
